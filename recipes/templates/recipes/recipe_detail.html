{% extends 'base.html' %}
{% load static %}
{% block title %}{{ recipe.name }}{% endblock %}

{% block content %}
<div class="container-home" style="max-width: 800px; margin: 2rem auto;">
    <a href="{% url 'manage_recipes' %}" class="btn" style="margin-bottom: 1rem;">&larr; Back to Recipes</a>
    <a href="{% url 'edit_recipe' recipe.pk %}" class="btn" style="margin-bottom: 1rem;"> Edit </a>
<button class="btn btn-danger" onclick="openDeleteModal('recipe', {{ recipe.pk }}, '{{ recipe.name|escapejs }}')">Delete </button>
        <!-- DELETE POPUP -->
        {% include 'recipes/delete_recipe_modal.html' %}

    <h1>{{ recipe.name }}</h1>
    <p><strong>Category:</strong> {{ recipe.category|default:"-" }}</p>
    <p><strong>Dietary Info:</strong> {{ recipe.dietary_info|default:"-" }}</p>
    <p><strong>Cooking Duration:</strong> {{ recipe.cooking_duration|default:"-" }}</p>
    <p><strong>Kcal per Serving:</strong> {{ recipe.kcal_per_serving|default:"-" }}</p>
    <p><strong>Servings:</strong> {{ recipe.servings|default:"-" }}</p>


    <h2>Ingredients</h2>
        <ul>
          {% for ing, qtys in recipe.quantity_ingredients_list_all_units %}
              <li>{{ ing.name }} â€” {{ qtys }}</li>
          {% empty %}
              <li>No ingredients added.</li>
          {% endfor %}
        </ul>
    <h2>Instructions</h2>
    <p>{{ recipe.instructions|linebreaks }}</p>

      <h2>Nutrients (Per Serving)</h2>
    <ul>
        {% for nutrient, value in recipe.nutrients_per_serving_with_units.items %}
            <li>{{ nutrient|capfirst }}: {{ value }}</li>
        {% empty %}
            <li>No nutrient info.</li>
        {% endfor %}
    </ul>

    <h2>Nutrients (Total)</h2>
    <ul>
        {% for nutrient, value in recipe.nutrients_with_units.items %}
            <li>{{ nutrient|capfirst }}: {{ value }}</li>
        {% empty %}
            <li>No nutrient info.</li>
        {% endfor %}
    </ul>

</div>

<style>
    h1, h2 { margin-top: 1.5rem; }
    ul { list-style: disc; padding-left: 2rem; }
    .btn { display: inline-block; padding: 0.5rem 1rem; background: #333; color: #fff; border-radius: 4px; text-decoration: none; }
</style>

<script src="{% static 'js/delete_popup.js' %}"></script>

{% endblock %}
