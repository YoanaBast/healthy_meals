{% extends 'base.html' %}
{% load static %}
{% block title %}Edit Ingredient{% endblock %}

{% block content %}

<div class="container-content">
    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
        <a href="javascript:history.back()" class="btn">Back</a>
    </div>
</div>


<div class="container-content">
    <div class="grid-container">
        <div class="grid-item info">

    <div class="section-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
            <h2 class="section-title">Edit Ingredient</h2>

    </div>

    <form method="POST">
        {% csrf_token %}

        <!-- Basic fields -->
        <div class="basic-fields">
            {{ form.name.label_tag }} {{ form.name }}
{{ form.category.label_tag }}
<div style="display:flex; align-items:center; gap:0.4rem;">
    {{ form.category }}
    <button type="button" class="btn btn-small" title="Add new category"
        onclick="openQuickModal('Add Category', '{% url "add_category_ajax" %}', 'id_category')">+</button>
</div>

                    <div style="display:flex; align-items:center; gap:0.4rem;">
                        {{ form.dietary_tag.label_tag }}
                        <button type="button" class="btn btn-small" title="Add new dietary tag"
                            onclick="openQuickModal('Add Dietary Tag', '{% url "add_dietary_tag_ajax" %}', 'id_dietary_tag')">+</button>
                    </div>
                    {{ form.dietary_tag }}
      </div>
        </div>
        <div class="grid-item info">

            <div class="basic-fields">

            {{ form.base_quantity.label_tag }} {{ form.base_quantity }}
            {{ form.default_unit.label_tag }} {{ form.default_unit }}
        </div>
        </div>
        </div>

<!-- Nutrients editable -->

        <h2 style="margin-top: 2rem;">Nutrients (per base quantity)</h2>
        <div class="nutrients-grid" style="display:grid; grid-template-columns: repeat(4, 1fr); gap:1rem;">
            {% for field in form.visible_fields %}
                {% if "base_quantity_" in field.name %}
                <div class="form-group">
                    {{ field.label_tag }}
                    {{ field }}
                </div>
                {% endif %}
            {% endfor %}

        </div>
        <button type="submit" class="btn" >Save</button>
        <a href="javascript:history.back()" class="btn btn-danger">Cancel</a>
    </form>

</div>
{% include 'core/_quick_add_modal.html' %}

{% endblock %}
